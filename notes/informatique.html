<!DOCTYPE html>
<html lang="fr">
<head>
<!-- 2021-02-13 sam. 20:06 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Des notes informatiques</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Alan Burlot">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel='canonical' href='https://alan.burlot.bzh' />
<meta name='author' content='Alan Burlot' />
<meta name='description' content='Site web personnel, n'engage que moi.' />
<meta name='keywords' content='alan,burlot,informatique,emacs,org-mode,musique,lectures' />
<script src='/js/prism.js'></script>
<link rel='stylesheet' href='/css/site.css' />
<link rel='stylesheet' href='/css/prism.css' />
<link rel='stylesheet' href='/css/fonts/firasans/fira.css' />
<link rel='apple-touch-icon' sizes='57x57' href='/images/favicon/apple-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='60x60' href='/images/favicon/apple-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='72x72' href='/images/favicon/apple-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='76x76' href='/images/favicon/apple-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='114x114' href='/images/favicon/apple-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='120x120' href='/images/favicon/apple-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='144x144' href='/images/favicon/apple-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='152x152' href='/images/favicon/apple-icon-152x152.png'>
<link rel='apple-touch-icon' sizes='180x180' href='/images/favicon/apple-icon-180x180.png'>
<link rel='icon' type='image/png' sizes='192x192'  href='/images/favicon/android-icon-192x192.png'>
<link rel='icon' type='image/png' sizes='32x32' href='/images/favicon/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='96x96' href='/images/favicon/favicon-96x96.png'>
<link rel='icon' type='image/png' sizes='16x16' href='/images/favicon/favicon-16x16.png'>
<link rel='manifest' href='/manifest.json'>
<meta name='msapplication-TileColor' content='#ffffff'>
<meta name='msapplication-TileImage' content='/ms-icon-144x144.png'>
<meta name='theme-color' content='#ffffff'>

<link rel='shortcut icon' href='/images/favicon.png' type='image/x-icon' />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="preamble" class="status">
<div class='intro'>
<h1><a href='/'>⋅ Alan <span class='sc'>Burlot</span> ⋅</a></h1>
</div>
<div class='nav'>
<ul>
<li><a href='/'>Home</a></li>
<li><a href='/blog/'>Blog</a></li>
<li><a href='/notes/'>Notes</a></li>
<li><a href='/about'>About</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="table-of-contents">
<h2>Table des matières</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org97efdf0">bash</a>
<ul>
<li><a href="#org01b0f0b">grep, sed et cie</a>
<ul>
<li><a href="#org58486e3">Isoler du texte entre deux mots</a></li>
<li><a href="#orgf744de6">Plusieurs motifs en une commande</a></li>
<li><a href="#org94123c5">Colorer la sortie dans le terminal</a></li>
<li><a href="#org7c2bed2">Inverser le sens de less</a></li>
<li><a href="#org9c3dd22">Compter le nombre de fichiers dans un dossier</a></li>
<li><a href="#orgc06246a">Arrêter un script si la commande précédente a donné une erreur</a></li>
<li><a href="#org0de4565">Convertir un pdf en jpg</a></li>
<li><a href="#org3bf7396">Compresser en parallèle avec pbzip2</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgec19158">org-mode</a>
<ul>
<li><a href="#org4549015">Gérer les liens internes dans l'export html</a></li>
<li><a href="#org7a59d53">Exporter un tableau org en html</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org97efdf0" class="outline-2">
<h2 id="org97efdf0">bash</h2>
<div class="outline-text-2" id="text-org97efdf0">
</div>
<div id="outline-container-org01b0f0b" class="outline-3">
<h3 id="org01b0f0b">grep, sed et cie</h3>
<div class="outline-text-3" id="text-org01b0f0b">
</div>
<div id="outline-container-org58486e3" class="outline-4">
<h4 id="org58486e3">Isoler du texte entre deux mots</h4>
<div class="outline-text-4" id="text-org58486e3">
<pre><code class="language-bash">
cat tmp | grep -o -P '(?<=foo).*(?=bar)'
</code></pre>
<p>
Permet d'isoler les caractères présents entre les mots foo et bar dans
tmp.
</p>
</div>
</div>
<div id="outline-container-orgf744de6" class="outline-4">
<h4 id="orgf744de6">Plusieurs motifs en une commande</h4>
<div class="outline-text-4" id="text-orgf744de6">
<pre><code class="language-bash">
grep 'word1\|word2\|word3' file
</code></pre>
<p>
ou avec <i>egrep</i> &lt;=&gt; <i>grep -e</i> pour ne pas avoir les antislashs :
</p>
<pre><code class="language-bash">
egrep 'word1|word2|word3' file
</code></pre>
</div>
</div>

<div id="outline-container-org94123c5" class="outline-4">
<h4 id="org94123c5">Colorer la sortie dans le terminal</h4>
<div class="outline-text-4" id="text-org94123c5">
<p>
Pour less:
</p>
<pre><code class="language-bash">
function cless() { pygmentize -O encoding=latin1,style=emacs -g "$@" | less -R; }
</code></pre>
<p>
Utilisation du script python pygmentize pour colorer le script passé
en argument ($@). On spécifie latin1 en encodage sinon il bug sur les
caractères accentués, même en utf8 (étrangement). L'option -g permet
de ne pas spécifier le <i>lexer</i> et de deviner le type de script passé
en argument. On pipe le tout dans <i>less</i> avec l'option -R qui va
interprêter les codes couleurs.
</p>

<p>
Et pour cat :
</p>
<pre><code class="language-bash">
alias ccat='pygmentize -g -O style=colorful,linenos=1,encoding=latin1'
</code></pre>
<p>
Identique à la commande précédente.
</p>
</div>
</div>

<div id="outline-container-org7c2bed2" class="outline-4">
<h4 id="org7c2bed2">Inverser le sens de less</h4>
<div class="outline-text-4" id="text-org7c2bed2">
<pre><code class="language-bash">
function iless() { tac "$@" | less; }
</code></pre>
<p>
La commande tac est un cat à l'envers, elle affiche le fichier par la fin. On le pipe dans less pour
faire défiler.
</p>
</div>
</div>

<div id="outline-container-org9c3dd22" class="outline-4">
<h4 id="org9c3dd22">Compter le nombre de fichiers dans un dossier</h4>
<div class="outline-text-4" id="text-org9c3dd22">
<pre><code class="language-bash">
alias countfiles="find . -type f -print0 | tr -d -c '\0' | wc -c"
</code></pre>
<p>
Trouver sur stackexchange. Possibilité de faire <i>find . -type f | wc -l</i> également.
</p>
</div>
</div>
<div id="outline-container-orgc06246a" class="outline-4">
<h4 id="orgc06246a">Arrêter un script si la commande précédente a donné une erreur</h4>
<div class="outline-text-4" id="text-orgc06246a">
<p>
On récupère le code de sortie d'exécution de la commande précédente. Si elle est différente de 1, on
quitte.
</p>
<pre><code class="language-bash">
rc=$?; if [[ $rc != 0 ]]; then exit $rc; fi
</code></pre>
<p>
Le plus simple étant de définir
</p>
<pre><code class="language-bash">
set -e
</code></pre>
<p>
en début de script.
</p>
</div>
</div>
<div id="outline-container-org0de4565" class="outline-4">
<h4 id="org0de4565">Convertir un pdf en jpg</h4>
<div class="outline-text-4" id="text-org0de4565">
<p>
Avec imagemagic :
</p>
<pre><code class="language-bash">
convert -density 300 -trim test.pdf -quality 100 test.jpg
</code></pre>
</div>
</div>
<div id="outline-container-org3bf7396" class="outline-4">
<h4 id="org3bf7396">Compresser en parallèle avec pbzip2</h4>
<div class="outline-text-4" id="text-org3bf7396">
<p>
À compiler soi-même si besoin. Exemple de commande qui fonctionne :
</p>
<pre><code class="language-bash">
tar cf BIBLIO2.tar.bz2 --use-compress-prog=/PATH/TO/pbzip2 BIBLIOGRAPHIE/
</code></pre>
<p>
Utilise automatiquement tous les CPU disponibles.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgec19158" class="outline-2">
<h2 id="orgec19158">org-mode</h2>
<div class="outline-text-2" id="text-orgec19158">
</div>
<div id="outline-container-org4549015" class="outline-3">
<h3 id="org4549015">Gérer les liens internes dans l'export html</h3>
<div class="outline-text-3" id="text-org4549015">
<p>
Pour les besoins de ce site, je souhaitais faire un lien vers un
fichier de note dans un post de blog. Pour que le lien soit
correctement géré, il fait ajouter la variable locale
<i>org-link-file-path-type</i> avec la valeur <i>relative</i>.
</p>
</div>
</div>
<div id="outline-container-org7a59d53" class="outline-3">
<h3 id="org7a59d53">Exporter un tableau org en html</h3>
<div class="outline-text-3" id="text-org7a59d53">
<p>
On part du tableau suivant :
</p>
<div class="org-src-container">
<pre class="src src-org">    <span style="color: #b294bb;">| Col1              | Col2   | Col3   |</span>
    <span style="color: #b294bb;">|-------------------+--------+--------|</span>
    <span style="color: #b294bb;">| Texte1            | Texte2 | Texte3 |</span>
    <span style="color: #b294bb;">| </span><span style="color: #81a2be; text-decoration: underline;"><a href="https://open.spotify.com/album/1FCIddh80qKhpueDBsLNfr?si=qLmC1QgXStCodpZAJW4eoA">Piano Starts here</a></span><span style="color: #b294bb;"> |        |        |</span>
</pre>
</div>
<p>
qui donne :
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Col1</th>
<th scope="col" class="org-left">Col2</th>
<th scope="col" class="org-left">Col3</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Texte1</td>
<td class="org-left">Texte2</td>
<td class="org-left">Texte3</td>
</tr>

<tr>
<td class="org-left"><a href="https://open.spotify.com/album/1FCIddh80qKhpueDBsLNfr?si=qLmC1QgXStCodpZAJW4eoA">Piano Starts here</a></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div class='footer'>
<a href='http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1' target='_blank' rel='license noopener noreferrer' style='display:inline-block;'><img style='border:0;height:22px!important;width=22px;margin-left:3px;vertical-align:text-bottom;' src='/images/licence/cc.svg' alt='cc'><img style='border:0;height:22px!important;width=22px;margin-left:3px;vertical-align:text-bottom;' src='/images/licence/by.svg' alt='by'><img style='border:0;height:22px!important;width=22px;margin-left:3px;vertical-align:text-bottom;' src='/images/licence/sa.svg' alt='sa'></a><br/>
Last updated 2021-02-13 sam. 18:07.<br/>
Built with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 26.1 (<a href="https://orgmode.org">Org</a> mode 9.4.4).
</div>
<script src='/js/main.js'></script>
</div>
</body>
</html>
